---
layout: form
title: City of San Diego Commuter Survey
permalink: /mobility-survey/
---

<style>
.search-panel {
  position: absolute;
  top: 10px;
  right: 10px;
  height: 29px;
  width: 200px;
  z-index: 2;
}
.search-panel input {
  height: 29px;
  padding: 8px;
  width: 100%;
  text-overflow: ellipsis;
  font: 400 11px Roboto, Arial, sans-serif;
}
.search-panel .fa {
  position: absolute;
  top: 2px;
  right: 5px;
  padding-right: 4px;
  line-height: 26px;
  background-color: white;
  cursor: pointer;
}
.form-map-container {
  width:100%;
  height:520px;
  position: relative;
}
#home-map, #work-map {
  height: 100%;
}
</style>

<p>
  To create a cleaner environment for future generations, the City of San Diego’s Climate Action Plan calls for more people biking, walking or taking transit to get around.  In order to track our progress toward these goals, the City is conducting a survey to understand how people commute to, from, or within the city. Thank you in advance for your participation!
</p>

<form name="mobility" netlify-honeypot="bot-field" action="/thank-you/" netlify>
  <p class="hidden">
    <label>Don’t fill this out: <input name="bot-field"></label>
  </p>

  <div class="form-group">
    <p class="question">
      How many days per week do you travel to and from your workplace?
    </p>
    <div class="form-check">
      <input type="number" class="form-check-input position-static" name="days-travel" min="0" max="7" pattern="\d+">
    </div>
  </div>


  <div class="form-group">
    <p class="question">
      What is your primary mode of transportation to work?
    </p>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="walking" required>
      <label class="form-check-label">
        Walking
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="biking" required>
      <label class="form-check-label">
        Biking
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="transit" required>
      <label class="form-check-label">
        Public transportation (e.g. train, trolley, bus)
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="shuttle" required>
      <label class="form-check-label">
        Workplace shuttle
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="vanpool" required>
      <label class="form-check-label">
        Vanpool/Carpool
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="rideshare" required>
      <label class="form-check-label">
        Ride Share (e.g. Lyft, Uber)
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="rideshare" required>
      <label class="form-check-label">
        Bike Share (e.g. Discovery Bike)
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="drive" required>
      <label class="form-check-label">
        Driving alone
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="parkride" required>
      <label class="form-check-label">
        Park and Ride
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="mode" value="parkride" required checked>
      <label class="form-check-label">
        NA / Work from home
      </label>
    </div>
  </div>

  <div class="form-group">
    <p class="question">
      If you replied 'Driving alone' in the previous question, how many times per week do you drive yourself to and from work?
    </p>
    <div class="form-check">
      <input type="number" class="form-check-input position-static" name="days-drive-alone" min="0" max="7" pattern="\d+">
    </div>
  </div>

  <div class="form-group">
    <p class="question">
      Are there any specific reasons that prevent you from biking, walking, or utilizing transit to get to work?
    </p>
    <p class="description"><i>Check all that apply.</i></p>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-time" value="1">
      <label class="form-check-label">
        Takes too long
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-cost" value="1">
      <label class="form-check-label">
        Cost
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-frequency" value="1">
      <label class="form-check-label">
        Frequency of transit service
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-reliability" value="1">
      <label class="form-check-label">
        Reliability of transit service
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-connectivity" value="1">
      <label class="form-check-label">
        Distance from home or workplace to transit station/stop
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-facilities" value="1">
      <label class="form-check-label">
        Lack of bicycle storage and shower facilities at workplace
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-family" value="1">
      <label class="form-check-label">
        Family care issues
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-noinfra" value="1">
      <label class="form-check-label">
        Lack of transportation infrastructure (e.g. bike lanes, sidewalks, transit lines)
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-poorinfra" value="1">
      <label class="form-check-label">
        Poor condition of transportation infrastructure (e.g. bike lanes, sidewalks, transit lines)
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-safety" value="1">
      <label class="form-check-label">
        Safety concerns
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reason-other" value="1">
      <label class="form-check-label">
        Other
      </label>
      <input type="text" class="form-check-input" name="reason-othertext">
    </div>
  </div>


  <div class="form-group">
    <p class="question">
        Does your employer offer incentives for taking alternative transportation (i.e. not driving alone) to work?
    </p>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="incentive-offered" value="1">
      <label class="form-check-label">
        Yes
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="incentive-offered" value="0">
      <label class="form-check-label">
        No
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="incentive-offered" value="2">
      <label class="form-check-label">
        Not sure
      </label>
    </div>
  </div>

  <div class="form-group">
    <p class="question">
        If you replied “yes” to the previous question, do you utilize your employer-offered incentives?
    </p>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="incentive-used" value="1">
      <label class="form-check-label">
        Yes
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="incentive-used" value="0">
      <label class="form-check-label">
        No
      </label>
    </div>
  </div>

  <div class="form-group">
    <p class="question">
      What incentives/programs would encourage you to take transit, bike, or walk to work?
    </p>
    <p class="description"><i>Check all that apply.</i></p>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="incentive-passes" value="1">
      <label class="form-check-label">
        Subsidized transit passes
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="incentive-shuttle" value="1">
      <label class="form-check-label">
        Shuttle services to/from transit stations
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="incentive-storage" value="1">
      <label class="form-check-label">
        Bike storage facilities
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="incentive-shower" value="1">
      <label class="form-check-label">
        Showers and lockers at workplace
      </label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="incentive-other" value="1">
      <label class="form-check-label">
        Other
      </label>
      <input type="text" class="form-check-input" name="incentive-othertext">
    </div>
  </div>

  <div class="form-group">
    <p class="question">
        Which of the following best describes your age?
    </p>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="<=17">
      <label class="form-check-label">
        17 years old and under
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="18-35">
      <label class="form-check-label">
        18-34 years
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="35-44">
      <label class="form-check-label">
        35-44 years
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="45-54">
      <label class="form-check-label">
        45-54 years
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="55-64">
      <label class="form-check-label">
        55-64 years
      </label>
    </div>
    <div class="form-check">
      <input type="radio" class="form-check-input" name="age" value="65+">
      <label class="form-check-label">
        65+ years
      </label>
    </div>
  </div>

  <div class="form-row">
      <p class="question">
          How close do you live to your workplace? 
      </p>
      <p class="description">
          To help us understand the possible impact of commuting, we would like to know how far apart your primary residence and your workplace are. This information will not be shared or used for any other purpose.
      </p>
      <div class="form-group col-md-6">
        <p class="description">
          Drop a pin on the map below to represent your <b>workplace</b>. You can click on the map (zoom in for better accuracy), or enter an address into the search bar. 
        </p>
        <div class="form-map-container">
          <div class="search-panel">
            <input type="text" id="work-address" placeholder="Search for an address">
            <span id="work-search" class="fa fa-search"></span>
          </div>
          <div id="work-map"></div>
        </div>
        <div class="form-check">
          <input type="text" class="form-check-input position-static" name="map-work" id="work-area">
        </div>
      </div>
      <div class="form-group col-md-6">
        <p class="description">
          Drop a point on the map below to represent your <b>residence</b>. You can click on the map (zoom in for better accuracy), or enter an address into the search bar.
        </p>
        <div class="form-map-container">
          <div class="search-panel">
            <input type="text" id="home-address" placeholder="Search for an address">
            <span id="home-search" class="fa fa-search"></span>
          </div>
          <div id="home-map"></div>
        </div>
        <div class="form-check">
          <input type="text" class="form-check-input position-static" name="map-home" id="home-area">
        </div>
      </div>
  </div>

  <div class="form-group">
    <p class="question">
      Enter to win a Discovery Bike membership
    </p>
    <p class="description">
      Provide your email address for entry into a raffle to win a one-year Discovery Bike membership. Your email address will not be stored or used for any other purpose.
    </p>
    <div class="form-check">
      <input type="email" class="form-check-input position-static" name="raffle-email">
    </div>
  </div>


  <button type="submit" class="btn btn-primary">Submit</button>

</form>



<script>

      var maps = [];
      var markers = [];
      var searchBoxes = [];
      var mapIds = ['work','home'];

      document.getElementById('home-address')
        .addEventListener('keypress', function(event){
          attachSubmitAddress(event);
        });

      document.getElementById('work-address')
        .addEventListener('keypress', function(event){
          attachSubmitAddress(event);
        });

      function initMap() {

        
        var geocoder = new google.maps.Geocoder();

        for (var i=0; i < mapIds.length; i++) {

          maps[i] = new google.maps.Map(document.getElementById(mapIds[i]+'-map'), {
            zoom: 10,
            center: new google.maps.LatLng(32.83,-117.1611),
            fullscreenControl: false,
            streetViewControl: false 
          });

          markers[i] = new google.maps.Marker({map: maps[i]});

          getLocations(i);

          var searchButton = document.getElementById(mapIds[i]+'-search');
          searchBoxes[i] = searchButton;

          setUpSearch(geocoder,i);

          //maps[i].data.loadGeoJson('https://s3.amazonaws.com/seshat.datasd.org/sde/cmty_plan/cmty_plan_datasd.geojson');

        }

      }

      function attachSubmitAddress(e) {
        
        if (e.keyCode === 13) {
            e.preventDefault();
            this.nextElementSibling.click();
          }

      }

      function setUpSearch(gc,b) {

        searchBoxes[b].addEventListener('click', function(e){
          if (b === 0) {
            var address = document.getElementById('work-address').value;
          } else {
            var address = document.getElementById('home-address').value;
          }
          geocodeAddress(gc, address, b);
        });

      }

      function geocodeAddress(gc, address, m){
        gc.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            placeMarker(results[0].geometry.location,m);
            fillLocationInput(m,results[0].geometry.location.toString());
          } else {
            console.log('Geocode was not successful for the following reason: ' + status);
          }
        }); 
      }


      function getLocations(p) {

        maps[p].addListener('click', function(event){
          placeMarker(event.latLng,p);
          fillLocationInput(p,event.latLng.toString());
        });

      }

      function placeMarker(latLng,m) {

        markers[m].setPosition(latLng);

      }

      function fillLocationInput(n,value){

        if (n === 0) {
            document.getElementById('work-area').value = value;
          } else {
            document.getElementById('home-area').value = value;
          }

      }




    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaCKe-2Y070-Q1GiuIIs4wGXHQe3yb8Sc&callback=initMap">
    </script>
